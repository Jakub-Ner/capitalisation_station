syntax = "proto3";

package aea.zarathustra.asset_bridging.v0_0_1;

message AssetBridgingMessage{

  // Custom Types
  message BridgeStatus{
    enum BridgeStatusEnum {
      BRIDGE_STATUS_ENUM_FAILED = 0;
      BRIDGE_STATUS_ENUM_COMPLETED = 1;
      BRIDGE_STATUS_ENUM_PENDING = 2;
      BRIDGE_STATUS_ENUM_CLAIMABLE = 3;
    }
    BridgeStatusEnum status = 1;
  }

  message ErrorCode{
    enum ErrorCodeEnum {
      ERROR_CODE_ENUM_UNKNOWN_ROUTE = 0;
      ERROR_CODE_ENUM_OTHER_EXCEPTION = 1;
    }
    ErrorCodeEnum error_code = 1;
  }


  // Performatives and contents
  message Request_Bridge_Performative{
    string source_chain = 1;
    string target_chain = 2;
    string source_token = 3;
    string target_token = 4;
    bool target_token_is_set = 5;
    int32 amount = 6;
    string bridge = 7;
    string receiver = 8;
    bool receiver_is_set = 9;
    map<string, string> kwargs = 10;
    bool kwargs_is_set = 11;
  }

  message Bridge_Status_Performative{
    BridgeStatus status = 1;
    string tx_hash = 2;
  }

  message Request_Status_Performative{
    string tx_hash = 1;
  }

  message Error_Performative{
    ErrorCode code = 1;
    string message = 2;
  }


  oneof performative{
    Bridge_Status_Performative bridge_status = 5;
    Error_Performative error = 6;
    Request_Bridge_Performative request_bridge = 7;
    Request_Status_Performative request_status = 8;
  }
}
